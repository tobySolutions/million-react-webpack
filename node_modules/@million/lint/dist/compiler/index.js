"use strict";var or=Object.create;var q=Object.defineProperty;var nr=Object.getOwnPropertyDescriptor;var ir=Object.getOwnPropertyNames;var sr=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty;var cr=(t,e)=>()=>(t&&(e=t(t=0)),e);var lr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ur=(t,e)=>{for(var r in e)q(t,r,{get:e[r],enumerable:!0})},Ie=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ir(e))!ar.call(t,n)&&n!==r&&q(t,n,{get:()=>e[n],enumerable:!(o=nr(e,n))||o.enumerable});return t};var h=(t,e,r)=>(r=t!=null?or(sr(t)):{},Ie(e||!t||!t.__esModule?q(r,"default",{value:t,enumerable:!0}):r,t)),pr=t=>Ie(q({},"__esModule",{value:!0}),t);var l=cr(()=>{"use strict"});var tt=lr((z,et)=>{"use strict";l();Object.defineProperty(z,"__esModule",{value:!0});z.default=void 0;function he(t){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(t)}var X=47,be=46,Sr=function(e){var r=he(e);if(r!=="string")throw new TypeError("Expected a string, got a ".concat(r))},Er=function(e,r){for(var o="",n=0,s=-1,i=0,c,u=0;u<=e.length;++u){if(u<e.length)c=e.charCodeAt(u);else{if(c===X)break;c=X}if(c===X){if(!(s===u-1||i===1))if(s!==u-1&&i===2){if(o.length<2||n!==2||o.charCodeAt(o.length-1)!==be||o.charCodeAt(o.length-2)!==be){if(o.length>2){var a=o.lastIndexOf("/");if(a!==o.length-1){a===-1?(o="",n=0):(o=o.slice(0,a),n=o.length-1-o.lastIndexOf("/")),s=u,i=0;continue}}else if(o.length===2||o.length===1){o="",n=0,s=u,i=0;continue}}r&&(o.length>0?o+="/..":o="..",n=2)}else o.length>0?o+="/"+e.slice(s+1,u):o=e.slice(s+1,u),n=u-s-1;s=u,i=0}else c===be&&i!==-1?++i:i=-1}return o},vr=function(e){try{return decodeURIComponent(e)}catch{return e}},Tr=function(e){Sr(e);var r=e;if(r.length===0)return".";var o=r.charCodeAt(0)===X,n=r.charCodeAt(r.length-1)===X;return r=vr(r),r=Er(r,!o),r.length===0&&!o&&(r="."),r.length>0&&n&&(r+="/"),o?"/"+r:r},wr=Tr;z.default=wr;et.exports=z.default});var Gr={};ur(Gr,{babel:()=>tr,default:()=>Qr,esbuild:()=>Kt,next:()=>Zt,rollup:()=>Qt,rspack:()=>qt,unplugin:()=>er,vite:()=>Yt,webpack:()=>Gt});module.exports=pr(Gr);l();l();l();var Ut=require("unplugin"),Ot=require("@rollup/pluginutils"),Ht=require("@babel/core");l();l();l();var N=h(require("@babel/types"));l();l();l();var ae,_e,Re,Me,Ae=!0;typeof process<"u"&&({FORCE_COLOR:ae,NODE_DISABLE_COLORS:_e,NO_COLOR:Re,TERM:Me}=process.env||{},Ae=process.stdout&&process.stdout.isTTY);var mr={enabled:!_e&&Re==null&&Me!=="dumb"&&(ae!=null&&ae!=="0"||Ae)};function S(t,e){let r=new RegExp(`\\x1b\\[${e}m`,"g"),o=`\x1B[${t}m`,n=`\x1B[${e}m`;return function(s){return!mr.enabled||s==null?s:o+(~(""+s).indexOf(n)?s.replace(r,n+o):s)+n}}var to=S(0,0),Le=S(1,22),ro=S(2,22),oo=S(3,23),no=S(4,24),io=S(7,27),so=S(8,28),ao=S(9,29),co=S(30,39),Fe=S(31,39),ce=S(32,39),Ue=S(33,39),lo=S(34,39),Oe=S(35,39),uo=S(36,39),po=S(37,39),K=S(90,39),mo=S(90,39),fo=S(40,49),go=S(41,49),yo=S(42,49),xo=S(43,49),bo=S(44,49),ho=S(45,49),So=S(46,49),Eo=S(47,49);var le=new Map,d=t=>{ue()==="debug"&&le.set(t,performance.now())},g=t=>{if(ue()!=="debug")return;let e=le.get(t);if(!e)return;let r=performance.now();le.delete(t);let o=r-e,n=Number(o.toFixed(4));n<.025||(n>.1?n=Fe(n):n>.05&&(n=Ue(n)),console.log(`   - ${n}ms ${K(`| ${t}`)}`))};var He=t=>{d("hasUseClientDirective");let e=t.node.directives;if(!e)return!1;for(let r=0,o=e.length;r<o;r++)if(e[r].value.value==="use client")return!0;return g("hasUseClientDirective"),!1},pe=new Map,me=t=>{var r;if(d("shouldIgnore"),!t)return!1;if(pe.has(t))return pe.get(t);let e=!1;for(let o=0,n=((r=t.node.leadingComments)==null?void 0:r.length)||0;o<n;o++)if(t.node.leadingComments[o].value.includes("million ignore")){e=!0;break}return pe.set(t,e),g("shouldIgnore"),e?!0:me(t.parentPath)};l();var ge=require("@babel/helper-module-imports"),J=h(require("@babel/types"));l();var f=h(require("@babel/types"));l();var Q=h(require("@babel/types"));var fr=/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/,G=t=>{if(d("hasJSX"),fr.test(t.getSource()))return!0;let e=!1;return t.traverse({JSXElement(r){e=!0,r.stop()},JSXFragment(r){e=!0,r.stop()}}),g("hasJSX"),e},A=t=>!t.length||!/[a-zA-Z]/.test(t[0])?!1:t[0]===t[0].toUpperCase();l();var fe=t=>Array.isArray(t)?t[0]:t;var je=(t,e)=>{d("createModuleFactory");let r=new Map,o={},n=(u,a)=>{let p=`${u}@${a}`;return r.has(p)||r.set(p,(0,ge.addNamed)(t,u,a)),r.get(p)},s=u=>{let a=`default@${u}`;return r.has(a)||r.set(a,(0,ge.addNamed)(t,"default",u,{nameHint:"_"})),r.get(a)},i=0,c=(u,a,p)=>{o[`export_${u??i++}`]={kind:"export",loc:[(a==null?void 0:a.start.line)||0,(a==null?void 0:a.start.column)||0,(a==null?void 0:a.end.line)||0,(a==null?void 0:a.end.column)||0],jsx:!!p}};return g("createModuleFactory"),{addNamed:n,addDefault:s,addExport:c,importMap:r,externalsMap:o,options:e}},v=(t,e,r)=>{d("isImportFrom");let o=t.node.callee;if(J.isMemberExpression(o)){if(!J.isIdentifier(o.property))return!1;o=o.property}if(!J.isIdentifier(o))return!1;let n=t.scope.getBinding(o.name);if(!n||!n.path.isImportSpecifier()||!J.isIdentifier(n.path.node.imported))return!1;let s=e.indexOf(n.path.node.imported.name);return s===-1||!n.path.parentPath.isImportDeclaration()||n.path.parentPath.node.source.value!==r?!1:(g("isImportFrom"),e[s])};var de=new Map,Je=(t,e)=>{d("getExternals");let o=e.path.component.scope.getAllBindings();for(let n in o){let s=o[n];if(s&&n===e.name||s.scope.uid===e.path.real.scope.uid)continue;if(de.has(`${n}::${s.scope.uid}`)){t.externalsMap[n]=de.get(`${n}::${s.scope.uid}`);continue}let i=s.kind,c=s.path.node.loc;n==="arguments"||i==="param"||(t.externalsMap[n]={kind:i,loc:[(c==null?void 0:c.start.line)||0,(c==null?void 0:c.start.column)||0,(c==null?void 0:c.end.line)||0,(c==null?void 0:c.end.column)||0],jsx:G(s.path)},de.set(`${n}::${s.scope.uid}`,t.externalsMap[n]))}return g("getExternals"),t.externalsMap};l();var Z=h(require("@babel/types"));var Y=t=>(d("unwrapJSXName"),Z.isJSXNamespacedName(t)?`${t.namespace.name}:${t.name.name}`:Z.isJSXMemberExpression(t)?`${Y(t.object)}.${Y(t.property)}`:(g("unwrapJSXName"),t.name));l();var T=h(require("@babel/types"));l();var V=new Map,_=(t,e)=>{let r=`${t}::${e}`;return $e(r)},$e=(t,e=0)=>{if(d("createHash"),V.has(t))return V.get(t);let r=3735928559^e,o=1103547991^e;for(let s=0,i;s<t.length;s++)i=t.charCodeAt(s),r=Math.imul(r^i,2654435761),o=Math.imul(o^i,1597334677);r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(r^r>>>13,3266489909);let n=4294967296*(2097151&o)+(r>>>0);if(V.has(t)){if(V.get(t)!==n)return $e(t,e+1)}else V.set(t,n);return g("createHash"),n};l();var R=h(require("@babel/types")),dr=R.arrayExpression([R.numericLiteral(0),R.numericLiteral(0),R.numericLiteral(0),R.numericLiteral(0)]),P=t=>{if(!t)return dr;let{start:e,end:r}=t;return R.arrayExpression([R.numericLiteral(e.line),R.numericLiteral(e.column),R.numericLiteral(r.line),R.numericLiteral(r.column)])};l();var L=h(require("@babel/types"));var Ve=t=>{d("createHir");let e=null;if(t.isArrowFunctionExpression()||t.isFunctionExpression()){L.isBlockStatement(t.node.body)||(t.node.body=L.blockStatement([L.returnStatement(t.node.body)]));let c=!1,u=t.find(a=>(a.isObjectProperty()&&(c=!0),a.isVariableDeclarator()));if(!u||c)return null;e=u}else t.isFunctionDeclaration()&&(e=t);if(!e)return null;let r=null,o=null;if(t.isClassDeclaration()){let c=e.get("body.body").find(a=>a.isClassMethod({kind:"constructor"}));if(!c)return null;t=c;let u=c.node.params;for(let a=0,p=u.length;a<p;a++){let m=u[a];if(L.isIdentifier(m,{name:"props"})){r=m,o=b=>{u[a]=b};break}}}else if(t.isFunctionDeclaration()||t.isFunctionExpression()||t.isArrowFunctionExpression()){let c=t.node.params;r=c[0]||null,o=u=>{c[0]=u}}let n=e.node.id;if(!(L.isIdentifier(n)&&A(n.name)&&G(t)))return null;let i={name:String(n.name),props:r,setProps:o,path:{real:t,component:e},type:{real:t.type,component:e.type}};return t._hir=i,g("createHir"),i},ye=new Map,H=t=>{if(d("getHir"),ye.has(t))return ye.get(t);let e=null;return t.find(r=>(e=r._hir,!!e)),e&&ye.set(t,e),g("getHir"),e};var ee=(t,e,r,o,n,s,i)=>{d("captureGeneric");let c=H(r);if(!c)return;let u=t.addNamed(e,"@million/lint/runtime"),a=T.addComment(T.callExpression(u,[T.numericLiteral(_(o,c.name)),r.node,P(s??r.node.loc),T.numericLiteral(n),i?T.objectExpression([T.objectProperty(T.identifier("name"),T.stringLiteral(i.name)),T.objectProperty(T.identifier("loc"),P(i.loc))]):T.nullLiteral()]),"leading","million ignore"),[p]=r.replaceWith(a);p.skip(),r.skip(),g("captureGeneric")};l();var C=h(require("@babel/types"));var Xe=(t,e,r,o)=>{var a;d("captureProps");let n=e.path.component.scope.generateUidIdentifier("props"),s=e.props,i=t.addNamed("captureProps","@million/lint/runtime"),c=C.addComment(C.callExpression(i,[C.numericLiteral(_(r,e.name)),n,P(s.loc),C.numericLiteral(o)]),"leading","million ignore");e.path.real.node.body.body.unshift(C.variableDeclaration("let",[C.variableDeclarator(s,n)]),C.expressionStatement(c)),(a=e.setProps)==null||a.call(e,n),g("captureProps")};l();var E=h(require("@babel/types"));var ze=(t,e)=>{d("registerFile");let r=t.addNamed("registerFile","@million/lint/runtime"),o=E.callExpression(r,[E.stringLiteral(e),E.stringLiteral(process.cwd()),t.addDefault("react"),E.stringLiteral(t.options.framework||"")]);return g("registerFile"),o},gr=E.memberExpression(E.identifier("JSON"),E.identifier("parse")),Be=(t,e,r,o)=>{d("registerComponent");let n=Je(t,e),s=JSON.stringify(n),i=t.addNamed("registerComponent","@million/lint/runtime"),c=E.callExpression(i,[E.stringLiteral(r),E.stringLiteral(e.name),E.numericLiteral(_(r,e.name)),E.identifier(e.name),E.callExpression(gr,[E.stringLiteral(s)]),P(e.path.real.isArrowFunctionExpression()?e.path.component.parentPath.node.loc:e.path.component.node.loc),E.numericLiteral(o)]);return g("registerComponent"),c};l();var M=h(require("@babel/types"));var xe=(t,e,r,o)=>{d("captureJSX");let n=H(e);if(!n)return;let s=M.cloneNode(e.node),i=e.find(p=>p.isJSXExpressionContainer()),c=t.addNamed("captureJSX","@million/lint/runtime"),u=M.addComment(M.callExpression(c,[M.numericLiteral(_(r,n.name)),s,P(e.node.loc),P((i==null?void 0:i.node.loc)??e.node.loc),M.numericLiteral(o)]),"leading","million ignore"),[a]=e.replaceWith(e.parentPath.isJSXElement()||e.parentPath.isJSXFragment()?M.jsxExpressionContainer(u):u);a.skip(),g("captureJSX")};l();var F=h(require("@babel/types"));var We=(t,e,r)=>{d("captureMount");let o=t.addNamed("useMount","@million/lint/runtime"),n=F.addComment(F.callExpression(o,[F.stringLiteral(r),F.stringLiteral(e.name)]),"leading","million ignore");e.path.real.node.body.body.unshift(F.expressionStatement(n)),g("captureMount")};l();var U=h(require("@babel/types"));var qe=(t,e,r,o,n,s)=>{d("captureDeps");let i=H(r);if(!i)return;let c=t.addNamed(e,"@million/lint/runtime"),u=[];if(r.isArrayExpression()){let m=r.node.elements;for(let b=0,D=m.length;b<D;b++){let w=m[b];u.push(w==null?void 0:w.loc)}}let a=U.addComment(U.callExpression(c,[U.numericLiteral(_(o,i.name)),r.node,P(s??r.node.loc),U.arrayExpression(u.map(m=>P(m))),U.numericLiteral(n)]),"leading","million ignore"),[p]=r.replaceWith(a);p.skip(),r.skip(),g("captureDeps")};l();var I=h(require("@babel/types"));var Ke=(t,e,r,o)=>{d("captureHTTP");let n=H(e);if(!n)return;let s=t.addNamed("captureHTTP","@million/lint/runtime"),i=[];I.traverseFast(e.node,a=>{I.isStringLiteral(a)&&a.value.includes("/")&&i.push(a)});let c=I.addComment(I.callExpression(s,[I.numericLiteral(_(r,n.name)),e.node,P(e.node.loc),I.arrayExpression(i),I.numericLiteral(o)]),"leading","million ignore"),[u]=e.replaceWith(c);u.skip(),e.skip(),g("captureHTTP")};var $=(t,e,r,o)=>{if(d("transformComponent"),e.scope.parent.uid!==r.scope.uid)return;if(e.isClass()){let a=e.node.superClass;if(!N.isMemberExpression(a))return;let p=a.object,m=a.property;if(!N.isIdentifier(p)||!N.isIdentifier(m)||p.name!=="React"||m.name!=="Component")return}let n=Ve(e);if(!n)return;let s=!0;if(N.isVariableDeclarator(n.path.component.node)&&n.path.component.parentPath.parent.body){let a=n.path.component.parentPath.parent.body.find(p=>p.source.value==="million/react");if(a!=null&&a.specifiers.some(p=>p.local.name==="_compiledBlock")){let p=n.path.component.node.init.callee;N.isIdentifier(p)&&p.name==="_compiledBlock"&&(s=!1)}}s&&We(t,n,o);let i=0;n.props&&(N.isObjectPattern(n.props)||N.isIdentifier(n.props))&&Xe(t,n,o,i++);let c=[];e.traverse({CallExpression(a){if(me(a))return;let p=a.node.callee;if(N.isIdentifier(p)){if(["fetch","useQuery","useSWR"].includes(p.name)){Ke(t,a,o,i++);return}if(p.name.startsWith("use")){if(v(a,["useState","useReducer"],"react")||v(a,["useAtom"],"jotai")){ee(t,"captureReducer",a,o,i++);return}if(v(a,["useContext"],"react")||v(a,["useSelector"],"react-redux")||v(a,["useSnapshot"],"valtio")||v(a,["useRecoilState"],"recoil")||v(a,["useAtomValue"],"jotai")){ee(t,"captureFunctionCall",a,o,i++);return}if(v(a,["useEffect","useLayoutEffect","useMemo","useCallback","useInsertionEffect"],"react")&&a.node.arguments.length>1){let m=fe(a.get("arguments.1"));if(!m.isExpression())return;qe(t,"captureDeps",m,o,i++,a.node.loc);return}}}N.isMemberExpression(p)&&N.isIdentifier(p.property)&&p.property.name==="setState"&&N.isIdentifier(p.object)&&p.object.name==="this"&&ee(t,"captureClassSetState",a,o,i)},JSXElement(a){let p=a.node,m=Y(p.openingElement.name);if(A(m)){if(m.includes("Provider")){c.unshift(()=>{xe(t,a,o,i)});return}xe(t,a,o,i)}}});for(let a=0,p=c.length;a<p;a++)c[a]();let u=Be(t,n,o,i+1);return g("transformComponent"),u};l();var y=h(require("@babel/types"));var yr=y.memberExpression(y.memberExpression(y.identifier("import"),y.identifier("meta")),y.identifier("hot")),xr=y.memberExpression(y.memberExpression(y.identifier("import"),y.identifier("meta")),y.identifier("webpackHot")),Qe=y.memberExpression(y.identifier("module"),y.identifier("hot")),br=y.binaryExpression("===",y.unaryExpression("typeof",y.identifier("module")),y.stringLiteral("undefined")),Ge=(t,e,r,o)=>{d("wrapHMR");let n=t.options.framework==="webpack"?xr:yr,s=o.length,i=new Array(s);for(let w=0;w<s;w++)i[w]=y.expressionStatement(o[w]);let c=e.scope.generateUidIdentifier("c"),u=t.addNamed("resync","@million/lint/runtime"),a=t.addNamed("reportOutliers","@million/lint/runtime"),p=y.variableDeclaration("let",[y.variableDeclarator(c,y.arrowFunctionExpression([],y.blockStatement(i)))]),m=y.arrowFunctionExpression([],y.blockStatement([y.expressionStatement(y.callExpression(c,[])),y.expressionStatement(y.callExpression(u,[])),y.expressionStatement(y.callExpression(a,[]))])),b=y.ifStatement(Qe,y.blockStatement([y.expressionStatement(y.callExpression(y.memberExpression(Qe,y.identifier("accept")),[y.stringLiteral(r),m]))])),D=t.options.legacyHmr?b:y.ifStatement(br,y.blockStatement([y.ifStatement(n,y.blockStatement([y.expressionStatement(y.callExpression(y.memberExpression(n,y.identifier("accept")),[y.stringLiteral(r),m]))]))]),b);return g("wrapHMR"),hr([p,D,y.expressionStatement(y.callExpression(c,[]))])},hr=t=>y.expressionStatement(y.callExpression(y.arrowFunctionExpression([],y.blockStatement(t)),[]));l();var Ye=h(require("@babel/types"));var Ze=t=>{d("getImports");let e=t.node.body,r=[];for(let o=0,n=e.length;o<n;o++){let s=e[o];if(!Ye.isImportDeclaration(s))continue;let i=s.specifiers,c=s.source.value;if(!i.length)continue;let u=s.loc,a={specifiers:[],source:c,start:s.start,end:s.end,loc:[u.start.line,u.start.column,u.end.line,u.end.column]};r.push(a);for(let p=0,m=i.length;p<m;p++){let b=i[p];a.specifiers.push(b.local.name)}}return g("getImports"),r};l();l();l();var xi=require("isomorphic-fetch");l();var Se=h(tt()),Ee=(t,e)=>t.includes(e)||(0,Se.default)(t).includes((0,Se.default)(e));var rt=process.cwd(),ve=async t=>{d("reset");try{let e=await st();for(let r=0,o=e.length;r<o;r++){let{port:n,cwd:s}=e[r];!Ee(t,s)&&!rt.includes(s)||fetch(`http://localhost:${n}/reset`).catch(()=>null)}}catch{}g("reset")},ot=async(t,e)=>{d("reportBundle");let r=[];for(let i in e){let c=e[i];for(let u=0,a=c.length;u<a;u++)r.push(c[u])}r.sort((i,c)=>c.size-i.size);let o=[];for(let i=0,c=r.length;i<c;i++){if(i<c*.25){o.push(r[i]);continue}break}let n={};for(let i=0,c=o.length;i<c;i++){let u=o[i];n[u.filename]||(n[u.filename]=[]),n[u.filename].push(u)}let s={};for(let i in e){let c=e[i];for(let u=0,a=c.length;u<a;u++)s[i]=c}try{await it(t,{bundle:{all:s,outliers:n}})}catch{}g("reportBundle")},nt=async(t,e)=>{d("reportStateManagers");try{await it(t,{stateManagers:e})}catch{}g("reportStateManagers")},it=async(t,e)=>{d("report");try{let r=await st();for(let o=0,n=r.length;o<n;o++){let{port:s,cwd:i}=r[o];!Ee(t,i)&&!rt.includes(i)||fetch(`http://localhost:${s}/ingest?t=${Object.keys(e).join(",")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(()=>null)}}catch{}g("report")},st=async()=>{d("getSync");let t=await fetch(`http://localhost:${52921}`);return g("getSync"),t.json()};l();var mt=require("fs"),oe=require("module"),re=h(require("path")),ft=require("util"),dt=h(require("zlib")),ne=h(require("esbuild"));l();var vi=new Error("timeout while waiting for mutex to become available"),Ti=new Error("mutex already locked"),Pr=new Error("request for lock canceled"),Nr=function(t,e,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(p){try{a(o.next(p))}catch(m){i(m)}}function u(p){try{a(o.throw(p))}catch(m){i(m)}}function a(p){p.done?s(p.value):n(p.value).then(c,u)}a((o=o.apply(t,e||[])).next())})},te=class{constructor(e,r=Pr){this._value=e,this._cancelError=r,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,o)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:r,reject:o}),this._dispatch()})}runExclusive(e,r=1){return Nr(this,void 0,void 0,function*(){let[o,n]=yield this.acquire(r);try{return yield e(o)}finally{n()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(r),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(r=>r.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let r=this._value;r>0;r--){let o=(e=this._weightedQueues[r-1])===null||e===void 0?void 0:e.shift();if(!o)continue;let n=this._value,s=r;this._value-=r,r=this._value+1,o.resolve([n,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let r=!1;return()=>{r||(r=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach(r=>r()),this._weightedWaiters[e-1]=[])}};l();var at=require("fs"),ct=require("module"),Te=h(require("path")),we=h(require("escalade"));function kr(t){let e=["name","version","peerDependencies"];for(let r of Object.keys(t))e.includes(r)||delete t[r]}var B="package.json",De=async t=>await(0,we.default)(t,(r,o)=>o.includes(B)?B:void 0)??void 0,Cr=async t=>{let e=await at.promises.readFile(t,"utf-8");return JSON.parse(e)},Ir=(t,e,r)=>(0,we.default)(t,async(o,n)=>{if(!n.includes(B))return;let s=Te.default.join(o,B),i=await Cr(s);return kr(i),r==null||r(s,i),i.name===e?B:void 0}),lt=async(t,e)=>{let r=(0,ct.createRequire)(Te.default.resolve(e,"<import>.js")),o=r.resolve(t),n=t.startsWith("@"),[s,i]=n?t.split("/"):[t.split("/")[0],""],c=s+(n?"/":"")+i,u,a;try{a=`${c}/package.json`,u=require(a)}catch{}let p,m;if(o!==c){let b=[];await Ir(o,c,(w,j)=>{b.push([w,j])})&&b.length>0&&([a,u]=b[b.length-1],b.length>1&&([m,p]=b[0]))}for(let b of Object.keys(r.cache))delete r.cache[b];return{rootPackageFile:a,rootPackage:u,modulePackageFile:m,modulePackage:p}};var _r=(0,ft.promisify)(dt.default.gzip),Rr=t=>_r(t).then(({length:e})=>e);process.on("beforeExit",()=>ne.stop());var ut=async t=>!!await mt.promises.stat(t).catch(()=>null);var Mr=t=>[t&&`export {${Object.values({...t}).join(", ")}}`].filter(Boolean).join(`
`),Ne=RegExp(`^node:|^(${oe.builtinModules.join("|")})(/|$)`),Ar={name:"external",setup(t){t.onResolve({filter:Ne,namespace:"file"},e=>({path:e.path,external:!0}))}},Lr=/^[a-z@]/,Pe=(0,oe.createRequire)(__filename),Fr={name:"external",setup(t){let e=new Map,r=new Map;t.onResolve({filter:Lr,namespace:"file"},async o=>{if(Ne.test(o.path))return null;let n,s=o.resolveDir;if(e.has(s))n=await e.get(s);else{let i=De(s).then(c=>c?Pe(c):null);e.set(s,i),n=await i}if(n!=null&&n.peerDependencies&&o.path in n.peerDependencies){let i=r.get(n.name);return i||(i=new Set,r.set(n.name,i)),i.add(o.path),{path:o.path,external:!0}}return null}),t.onEnd(()=>{for(let o of Object.keys(Pe.cache))delete Pe.cache[o];e.clear()})}},pt=new WeakMap,Ur=async(t,e,{filename:r,baseDir:o,projectPackageFile:n,cache:s=!1})=>{let i=e.source,[c]=i.split("/");if(c.endsWith(".css")||c.endsWith(".scss"))throw new Error("CSS is not supported");if(Ne.test(c))throw new Error("Skip builtin modules");let u=`${t}
${Mr(e.specifiers)}`,{rootPackage:a}=await lt(i,o).catch(()=>({})),p=s&&a!==void 0&&a;if(s&&p){let w=pt.get(p);if(w)return w}let m=a?Object.keys({...a.peerDependencies}):[],b=n?re.default.dirname(n):o,D=0;try{let w=await ne.build({stdin:{loader:"ts",contents:u,resolveDir:re.default.dirname(r),sourcefile:"<import>"},outfile:"<bundle>.js",absWorkingDir:b,plugins:[Ar,Fr],resolveExtensions:[".jsx",".js",".tsx",".ts",".json"],loader:{".node":"binary",".jpeg":"empty",".jpg":"empty",".png":"empty",".webp":"empty",".gif":"empty",".svg":"empty"},external:m,target:"esnext",format:"esm",platform:"browser",metafile:!1,sourcemap:!1,minify:!0,bundle:!0,write:!1,logLimit:0,logLevel:"silent"}),j=await Promise.all(w.outputFiles.map(async O=>{let W=O.contents.length,rr=O.contents;return delete O.contents,delete O.text,[W,W===0?0:await Rr(rr)]}));for(let O=0,W=j.length;O<W;O++)D+=j[O][1];s&&p&&pt.set(p,D)}catch{}return D},Or=new te(2);async function*gt(t,e,r){let o=process.cwd(),n=e&&await ut(e)?re.default.dirname(e):o&&await ut(o)?o:null;if(!n)return null;let s=await De(n),i={filename:e,baseDir:n,projectPackageFile:s,cache:!0};for(let c=0,u=r.length;c<u;c++){let a=r[c],p=t.substring(a.start,a.end),m=0,[b,D]=await Or.acquire();try{m=await Ur(p,a,i)}catch{}finally{D(),m&&(yield m)}}}var Hr=async(t,e,r)=>{let o=[],n=0;for await(let s of gt(t,e,r)){let i=r[n];o.push({size:s,filename:e,loc:i.loc}),n++}return o},yt={},xt=async(t,e,r)=>{d("bundle");try{let o=await Hr(t,e,r);return yt[e]=o,await ot(e,yt),o}catch{}return g("bundle"),[]};l();l();var bt=h(require("@babel/types"));var ht=(t,e)=>{d("captureJotai");let r=t.options.filename,o=e.node.callee;if(!bt.isIdentifier(o))return null;let n=v(e,["atom"],"jotai");if(!n)return null;let s=e.find(c=>c.isVariableDeclarator());if(!s)return null;let i=s.node.loc;return g("captureJotai"),{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};l();var St=h(require("@babel/types"));var Et=(t,e)=>{d("captureRecoil");let r=t.options.filename,o=e.node.callee;if(!St.isIdentifier(o))return null;let n=v(e,["atom","selector"],"recoil");if(!n)return null;let s=e.find(c=>c.isVariableDeclarator());if(!s)return null;let i=s.node.loc;return g("captureRecoil"),{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};l();var ke=h(require("@babel/types"));var vt=(t,e)=>{d("captureRedux");let r=t.options.filename;if(e.isCallExpression()){let o=e.node.callee;if(!ke.isIdentifier(o))return null;let n=v(e,["configureStore","createSlice","createReducer"],"@reduxjs/toolkit");if(!n)return null;let s=e.find(c=>c.isVariableDeclarator());if(!s)return null;let i=s.node.loc;return{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}}if(e.isFunctionDeclaration()||e.isVariableDeclarator()){let o=e.node.id;if(!ke.isIdentifier(o))return null;if(o.name.toLowerCase().includes("reducer")){let n=e.node.loc;return{filename:r,type:"reducer",loc:[n.start.line,n.start.column,n.end.line,n.end.column]}}}return g("captureRedux"),null};l();var Tt=h(require("@babel/types"));var wt=(t,e)=>{d("captureValtio");let r=t.options.filename,o=e.node.callee;if(!Tt.isIdentifier(o))return null;let n=v(e,["proxy"],"valtio");if(!n)return null;let s=e.find(c=>c.isVariableDeclarator());if(!s)return null;let i=s.node.loc;return g("captureValtio"),{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};l();var Dt=h(require("@babel/types"));var Pt=(t,e)=>{d("captureZustand");let r=t.options.filename,o=e.node.callee;if(!Dt.isIdentifier(o))return null;let n=v(e,["create"],"zustand");if(!n)return null;let s=e.find(c=>c.isVariableDeclarator());if(!s)return null;let i=s.node.loc;return g("captureZustand"),{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};l();var Nt=h(require("@babel/types"));var kt=(t,e)=>{d("captureMobx");let r=t.options.filename,o=e.node.callee;if(!Nt.isIdentifier(o))return null;let n=v(e,["makeAutoObservable"],"mobx-react-lite");if(!n)return null;let s=e.find(c=>c.isClassDeclaration());if(!s)return null;let i=s.node.loc;return g("captureMobx"),{filename:r,type:n,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var ie=(t,e,r)=>{d("extractStateManagers");let{source:o}=t.options;if(o){if(o.includes("jotai")&&e.isCallExpression()){let n=ht(t,e);n&&(r.jotai??(r.jotai=[]),r.jotai.push(n))}if(o.includes("recoil")&&e.isCallExpression()){let n=Et(t,e);n&&(r.recoil??(r.recoil=[]),r.recoil.push(n))}if(o.includes("valtio")&&e.isCallExpression()){r.valtio??(r.valtio=[]);let n=wt(t,e);n&&(r.valtio??(r.valtio=[]),r.valtio.push(n))}if(o.includes("zustand")&&e.isCallExpression()){let n=Pt(t,e);n&&(r.zustand??(r.zustand=[]),r.zustand.push(n))}if(o.includes("redux")&&(e.isCallExpression()||e.isVariableDeclarator()||e.isFunctionDeclaration())){r.redux??(r.redux=[]);let n=vt(t,e);n&&(r.redux??(r.redux=[]),r.redux.push(n))}if(o.includes("mobx")&&e.isCallExpression()){let n=kt(t,e);n&&(r.mobx??(r.mobx=[]),r.mobx.push(n))}g("extractStateManagers")}};l();var Ct=["useEffect","useLayoutEffect","useInsertionEffect","useDebugValue","useImperativeHandle","useRef","useReducer","useState","useContext","useMemo","useCallback"],jr=Ct.length,It=t=>{if(!t)return!1;for(let e=0;e<jr;e++){let r=Ct[e];if(t.includes(`${r}(`))return!0}return!1};var se=(t,e={})=>{let r=e.filename||"",o=[],n=()=>{var i;s||(s=!0,(i=o.shift())==null||i())},s=!1;return{name:"anya",visitor:{Program(i){let c=Ze(i),u=[],a={};if(e.rsc&&!He(i)&&!It(e.source))return;let p=je(i,e);if(u.push(ze(p,r)),i.traverse({CallExpression(m){ie(p,m,a)},ArrowFunctionExpression(m){if(!e.isJSX)return;let b=$(p,m,i,r);b&&u.push(b)},FunctionDeclaration(m){if(ie(p,m,a),!e.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let b=$(p,m,i,r);b&&u.push(b)},FunctionExpression(m){if(!e.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let b=$(p,m,i,r);b&&u.push(b)},VariableDeclarator(m){ie(p,m,a)},ClassDeclaration(m){if(e.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(p,m,i,r)}},ClassExpression(m){if(e.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(p,m,i,r)}}}),!!u.length){if(e.isJSX){let m=Ge(p,i,r,u);i.node.body.push(m)}nt(r,a),e.measureBundleSize&&o.push(async()=>{await xt(e.source,r,c),s=!1,n()}),n()}}}}};var _t=se;l();var Rt=(t,e,r)=>{d("repushPlugin");let o=new Set(r),n=-1,s=-1,i;for(let c=0,u=t.length;c<u;c+=1){let a=t[c];o.has(a.name)&&n===-1&&(n=c),a.name===e&&(s=c,i=a)}n!==-1&&s!==-1&&n<s&&(t.splice(s,1),t.splice(n,0,i)),g("repushPlugin")},Ce=t=>t.replace(process.cwd(),"");l();var Mt=!1,At=()=>{if(Mt)return;let t=performance.now();Mt=!0,console.log(`
 ${Le(Oe("\u26A1 Million Lint v0.0.73"))}`),console.log(` ${ce("\u2713")} Ready in ${(performance.now()-t).toFixed(2)}ms`)},Lt=t=>(console.log(` ${K("\u25CB")} Compiling ${Ce(t)} ...`),performance.now()),Ft=(t,e,r)=>{if(e===null)return 0;let o=performance.now()-e;return console.log(` ${ce("\u2713")} Compiled ${Ce(t)} in ${o.toFixed(2)}ms (total: ${r.toFixed(2)}ms)`),o};var Jr="**/*.{jsx,tsx,ts,js,mjs,cjs}",$r="**/node_modules/**/*",jt=!1,ue=()=>jt,Vr=process.env.NODE_ENV==="production",Xr=[".cache/",".vite/"],k=(0,Ut.createUnplugin)((t={},e)=>{var s,i;if(Vr)return{name:"anya"};At();let r=(0,Ot.createFilter)(((s=t.filter)==null?void 0:s.include)||Jr,((i=t.filter)==null?void 0:i.exclude)||[$r,"**/_app.{jsx,tsx,js,ts}","**/_document.{jsx,tsx,js,ts}"]),o=null,n=0;return jt=t.dev||!1,t.framework??(t.framework=e.framework),{enforce:"pre",name:"anya",watchChange(c){n=0,ve(c)},transformInclude(c){let u=r(c);return u&&t.dev&&(o=Lt(c)),u},async transform(c,u){var a;try{let p=!0;if((u.endsWith(".ts")||u.endsWith(".mjs")||u.endsWith(".cjs"))&&(p=!1),u.endsWith(".js")&&!/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/.test(c)&&(p=!1),!p||Xr.some(D=>u.includes(D)))return;let m=["jsx",["importAttributes",{deprecatedAssertSyntax:!1}],"throwExpressions","decorators","destructuringPrivate","explicitResourceManagement"];if(/\.[mc]?tsx?$/i.test(u)&&m.push("typescript"),(a=t.plugins)!=null&&a.length)for(let D=0,w=t.plugins.length;D<w;D++){let j=t.plugins[D];typeof j=="string"&&m.push(j)}d("babel");let b=await(0,Ht.transformAsync)(c,{plugins:[[_t,{...t,measureBundleSize:t.measureBundleSize??!0,source:c,isJSX:p,filename:u}]],parserOpts:{plugins:m},filename:u,ast:!1,sourceFileName:u,sourceMaps:!0,configFile:!1,babelrc:!1});if(g("babel"),t.dev&&(n+=Ft(u,o,n)),b)return{code:b.code||"",map:b.map}}catch{}return null},vite:{handleHotUpdate(c){n=0,ve(c.file)},configResolved(c){Rt(c.plugins,"anya",["astro:jsx","vite:react-babel","vite:react-jsx","vite:preact-jsx","vite:react-swc"])}}}});var zr=k.vite,Jt=zr;l();var Br=k.rspack,$t=Br;l();var Wr=k.rollup,Vt=Wr;l();var qr=k.rspack,Xt=qr;l();var Kr=k.esbuild,zt=Kr;l();var Bt=(t={})=>(e={})=>Array.isArray(e)?(e.push(Bt(t)),e):{...e,webpack:(r,o)=>o.isServer||!o.dev?r:(r.plugins.unshift(k.webpack({framework:"next",...t,measureBundleSize:!1})),typeof e.webpack=="function"?e.webpack(r,o):r)},Wt=Bt;var qt=Xt,Kt=zt,Qt=Vt,Gt=$t,Yt=Jt,Zt=Wt,er=k,tr=se,Qr={vite:Yt,webpack:Gt,rollup:Qt,rspack:qt,esbuild:Kt,next:Zt,unplugin:er,babel:tr};0&&(module.exports={babel,esbuild,next,rollup,rspack,unplugin,vite,webpack});
